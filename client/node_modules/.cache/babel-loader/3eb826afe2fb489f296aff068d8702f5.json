{"ast":null,"code":"var _jsxFileName = \"/Users/ry/Downloads/full-stack/client/src/pages/App.js\";\nimport React, { Component } from 'react';\nimport { setTasks, addTask, updateCompleted, removeTask } from '../actions/Actions';\nimport Tasks from '../components/Tasks';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport './App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value,\n        errorMessage: ''\n      });\n    };\n\n    this.handleToggle = () => {\n      let toggleOn = this.state.toggleOn;\n\n      if (!toggleOn) {\n        this.setState({\n          toggleOn: true\n        });\n      }\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            task = _this$state.task,\n            description = _this$state.description,\n            due = _this$state.due;\n      const dispatch = this.props.dispatch;\n\n      if (!task) {\n        this.setState({\n          errorMessage: 'Please enter a task'\n        });\n        return;\n      } else if (!description) {\n        this.setState({\n          errorMessage: 'Please enter a description'\n        });\n        return;\n      } else if (!due) {\n        this.setState({\n          errorMessage: 'Please enter a due date'\n        });\n        return;\n      }\n\n      const date = due.split('-');\n      const newTask = {\n        taskname: task,\n        taskDescription: description,\n        dueDate: {\n          month: date[1],\n          day: date[2],\n          year: date[0]\n        },\n        completed: false\n      };\n      axios.post('/tasks', newTask).then(res => {\n        const _res$data = res.data,\n              task = _res$data.task,\n              message = _res$data.message;\n        console.log(message);\n        dispatch(addTask(task));\n        this.setState({\n          toggleOn: false,\n          task: '',\n          description: '',\n          due: ''\n        });\n      }).catch(err => {\n        console.log('Error:', err);\n      });\n    };\n\n    this.handleComplete = e => {\n      const taskId = e.target.parentElement.value;\n      const dispatch = this.props.dispatch;\n      const updatedTask = {\n        id: taskId,\n        completed: e.target.checked\n      };\n      axios.patch(\"/tasks/\".concat(taskId), updatedTask).then(res => {\n        console.log(res.data.message);\n        dispatch(updateCompleted(updatedTask.id, updatedTask.completed));\n        this.setState({});\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.deleteById = e => {\n      e.preventDefault();\n      const taskId = e.target.parentElement.value;\n      const dispatch = this.props.dispatch;\n      const task = {\n        id: taskId\n      };\n      axios.delete(\"/tasks/\".concat(taskId), task).then(res => {\n        console.log(res.data.message);\n        dispatch(removeTask(task.id));\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleFilter = e => {\n      const filter = JSON.stringify({\n        where: {\n          filter: e.target.value\n        }\n      });\n      const dispatch = this.props.dispatch;\n      console.log('Filter:', filter);\n      axios.get(\"/tasks?filter\".concat(filter)).then(res => {\n        const _res$data2 = res.data,\n              data = _res$data2.data,\n              message = _res$data2.message;\n        console.log(message);\n        dispatch(setTasks(data));\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.state = {\n      toggleOn: false,\n      task: '',\n      description: '',\n      due: '',\n      errorMessage: ''\n    };\n  }\n\n  componentDidMount() {\n    const dispatch = this.props.dispatch;\n    axios.get(\"/tasks\").then(res => {\n      const _res$data3 = res.data,\n            data = _res$data3.data,\n            message = _res$data3.message;\n      dispatch(setTasks(data));\n      console.log(message);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          task = _this$state2.task,\n          toggleOn = _this$state2.toggleOn,\n          description = _this$state2.description,\n          due = _this$state2.due,\n          errorMessage = _this$state2.errorMessage;\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Tasks, {\n      task: task,\n      description: description,\n      due: due,\n      toggleOn: toggleOn,\n      message: errorMessage,\n      tasks: this.props.tasks,\n      handleToggle: this.handleToggle,\n      handleChange: this.handleChange,\n      deleteById: this.deleteById,\n      handleComplete: this.handleComplete,\n      handleSubmit: this.handleSubmit,\n      handleFilter: this.handleFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default connect(state => state)(App);","map":{"version":3,"sources":["/Users/ry/Downloads/full-stack/client/src/pages/App.js"],"names":["React","Component","setTasks","addTask","updateCompleted","removeTask","Tasks","connect","axios","App","constructor","handleChange","e","setState","target","name","value","errorMessage","handleToggle","toggleOn","state","handleSubmit","preventDefault","task","description","due","dispatch","props","date","split","newTask","taskname","taskDescription","dueDate","month","day","year","completed","post","then","res","data","message","console","log","catch","err","handleComplete","taskId","parentElement","updatedTask","id","checked","patch","deleteById","delete","handleFilter","filter","JSON","stringify","where","get","componentDidMount","render","tasks"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,EAAmBC,OAAnB,EAA4BC,eAA5B,EAA6CC,UAA7C,QAA+D,oBAA/D;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;;AAEA,MAAMC,GAAN,SAAkBR,SAAlB,CAA4B;AAC1BS,EAAAA,WAAW,GAAG;AACZ;;AADY,SA0BdC,YA1Bc,GA0BCC,CAAC,IAAI;AAClB,WAAKC,QAAL,CAAc;AACZ,SAACD,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASE,KADd;AAEZC,QAAAA,YAAY,EAAE;AAFF,OAAd;AAID,KA/Ba;;AAAA,SAiCdC,YAjCc,GAiCC,MAAM;AAAA,UACbC,QADa,GACA,KAAKC,KADL,CACbD,QADa;;AAGnB,UAAI,CAACA,QAAL,EAAe;AACb,aAAKN,QAAL,CAAc;AACZM,UAAAA,QAAQ,EAAE;AADE,SAAd;AAGD;AACF,KAzCa;;AAAA,SA4CdE,YA5Cc,GA4CCT,CAAC,IAAI;AAClBA,MAAAA,CAAC,CAACU,cAAF;AADkB,0BAGiB,KAAKF,KAHtB;AAAA,YAGVG,IAHU,eAGVA,IAHU;AAAA,YAGJC,WAHI,eAGJA,WAHI;AAAA,YAGSC,GAHT,eAGSA,GAHT;AAAA,YAIVC,QAJU,GAIG,KAAKC,KAJR,CAIVD,QAJU;;AAMlB,UAAI,CAACH,IAAL,EAAW;AACT,aAAKV,QAAL,CAAc;AACZI,UAAAA,YAAY,EAAE;AADF,SAAd;AAGA;AACD,OALD,MAKO,IAAI,CAACO,WAAL,EAAkB;AACvB,aAAKX,QAAL,CAAc;AACZI,UAAAA,YAAY,EAAE;AADF,SAAd;AAGA;AACD,OALM,MAKA,IAAI,CAACQ,GAAL,EAAU;AACf,aAAKZ,QAAL,CAAc;AACZI,UAAAA,YAAY,EAAE;AADF,SAAd;AAGA;AACD;;AAED,YAAMW,IAAI,GAAGH,GAAG,CAACI,KAAJ,CAAU,GAAV,CAAb;AAEA,YAAMC,OAAO,GAAG;AACdC,QAAAA,QAAQ,EAAER,IADI;AAEdS,QAAAA,eAAe,EAAER,WAFH;AAGdS,QAAAA,OAAO,EAAE;AAAEC,UAAAA,KAAK,EAAEN,IAAI,CAAC,CAAD,CAAb;AAAkBO,UAAAA,GAAG,EAAEP,IAAI,CAAC,CAAD,CAA3B;AAAgCQ,UAAAA,IAAI,EAAER,IAAI,CAAC,CAAD;AAA1C,SAHK;AAIdS,QAAAA,SAAS,EAAE;AAJG,OAAhB;AAOA7B,MAAAA,KAAK,CACF8B,IADH,CACQ,QADR,EACkBR,OADlB,EAEGS,IAFH,CAEQC,GAAG,IAAI;AAAA,0BACeA,GAAG,CAACC,IADnB;AAAA,cACHlB,IADG,aACHA,IADG;AAAA,cACGmB,OADH,aACGA,OADH;AAEXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACAhB,QAAAA,QAAQ,CAACvB,OAAO,CAACoB,IAAD,CAAR,CAAR;AACA,aAAKV,QAAL,CAAc;AACZM,UAAAA,QAAQ,EAAE,KADE;AAEZI,UAAAA,IAAI,EAAE,EAFM;AAGZC,UAAAA,WAAW,EAAE,EAHD;AAIZC,UAAAA,GAAG,EAAE;AAJO,SAAd;AAMD,OAZH,EAaGoB,KAbH,CAaSC,GAAG,IAAI;AACZH,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBE,GAAtB;AACD,OAfH;AAgBD,KA5Fa;;AAAA,SA+FdC,cA/Fc,GA+FGnC,CAAC,IAAI;AACpB,YAAMoC,MAAM,GAAGpC,CAAC,CAACE,MAAF,CAASmC,aAAT,CAAuBjC,KAAtC;AADoB,YAEZU,QAFY,GAEC,KAAKC,KAFN,CAEZD,QAFY;AAIpB,YAAMwB,WAAW,GAAG;AAClBC,QAAAA,EAAE,EAAEH,MADc;AAElBX,QAAAA,SAAS,EAAEzB,CAAC,CAACE,MAAF,CAASsC;AAFF,OAApB;AAKA5C,MAAAA,KAAK,CACF6C,KADH,kBACmBL,MADnB,GAC6BE,WAD7B,EAEGX,IAFH,CAEQC,GAAG,IAAI;AACXG,QAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACC,IAAJ,CAASC,OAArB;AACAhB,QAAAA,QAAQ,CAACtB,eAAe,CAAC8C,WAAW,CAACC,EAAb,EAAiBD,WAAW,CAACb,SAA7B,CAAhB,CAAR;AACA,aAAKxB,QAAL,CAAc,EAAd;AACD,OANH,EAOGgC,KAPH,CAOSC,GAAG,IAAI;AACZH,QAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACD,OATH;AAUD,KAlHa;;AAAA,SAqHdQ,UArHc,GAqHD1C,CAAC,IAAI;AAChBA,MAAAA,CAAC,CAACU,cAAF;AACA,YAAM0B,MAAM,GAAGpC,CAAC,CAACE,MAAF,CAASmC,aAAT,CAAuBjC,KAAtC;AAFgB,YAGRU,QAHQ,GAGK,KAAKC,KAHV,CAGRD,QAHQ;AAKhB,YAAMH,IAAI,GAAG;AACX4B,QAAAA,EAAE,EAAEH;AADO,OAAb;AAIAxC,MAAAA,KAAK,CACF+C,MADH,kBACoBP,MADpB,GAC8BzB,IAD9B,EAEGgB,IAFH,CAEQC,GAAG,IAAI;AACXG,QAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACC,IAAJ,CAASC,OAArB;AACAhB,QAAAA,QAAQ,CAACrB,UAAU,CAACkB,IAAI,CAAC4B,EAAN,CAAX,CAAR;AACD,OALH,EAMGN,KANH,CAMSC,GAAG,IAAI;AACZH,QAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACD,OARH;AASD,KAvIa;;AAAA,SA0IdU,YA1Ic,GA0IC5C,CAAC,IAAI;AAClB,YAAM6C,MAAM,GAAGC,IAAI,CAACC,SAAL,CAAe;AAACC,QAAAA,KAAK,EAAE;AAACH,UAAAA,MAAM,EAAE7C,CAAC,CAACE,MAAF,CAASE;AAAlB;AAAR,OAAf,CAAf;AADkB,YAEVU,QAFU,GAEG,KAAKC,KAFR,CAEVD,QAFU;AAIlBiB,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBa,MAAvB;AACAjD,MAAAA,KAAK,CACFqD,GADH,wBACuBJ,MADvB,GAEGlB,IAFH,CAEQC,GAAG,IAAI;AAAA,2BACeA,GAAG,CAACC,IADnB;AAAA,cACHA,IADG,cACHA,IADG;AAAA,cACGC,OADH,cACGA,OADH;AAEXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACAhB,QAAAA,QAAQ,CAACxB,QAAQ,CAACuC,IAAD,CAAT,CAAR;AACD,OANH,EAOGI,KAPH,CAOSC,GAAG,IAAI;AACZH,QAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACD,OATH;AAUD,KAzJa;;AAEZ,SAAK1B,KAAL,GAAa;AACXD,MAAAA,QAAQ,EAAE,KADC;AAEXI,MAAAA,IAAI,EAAE,EAFK;AAGXC,MAAAA,WAAW,EAAE,EAHF;AAIXC,MAAAA,GAAG,EAAE,EAJM;AAKXR,MAAAA,YAAY,EAAE;AALH,KAAb;AAOD;;AAED6C,EAAAA,iBAAiB,GAAG;AAAA,UACVpC,QADU,GACG,KAAKC,KADR,CACVD,QADU;AAGlBlB,IAAAA,KAAK,CACFqD,GADH,WAEGtB,IAFH,CAEQC,GAAG,IAAI;AAAA,yBACeA,GAAG,CAACC,IADnB;AAAA,YACHA,IADG,cACHA,IADG;AAAA,YACGC,OADH,cACGA,OADH;AAEXhB,MAAAA,QAAQ,CAACxB,QAAQ,CAACuC,IAAD,CAAT,CAAR;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACD,KANH,EAOGG,KAPH,CAOSC,GAAG,IAAI;AACZH,MAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACD,KATH;AAUD;;AAmIDiB,EAAAA,MAAM,GAAG;AAAA,yBACoD,KAAK3C,KADzD;AAAA,UACCG,IADD,gBACCA,IADD;AAAA,UACOJ,QADP,gBACOA,QADP;AAAA,UACiBK,WADjB,gBACiBA,WADjB;AAAA,UAC8BC,GAD9B,gBAC8BA,GAD9B;AAAA,UACmCR,YADnC,gBACmCA,YADnC;AAGP,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAEM,IADR;AAEE,MAAA,WAAW,EAAEC,WAFf;AAGE,MAAA,GAAG,EAAEC,GAHP;AAIE,MAAA,QAAQ,EAAEN,QAJZ;AAKE,MAAA,OAAO,EAAEF,YALX;AAME,MAAA,KAAK,EAAE,KAAKU,KAAL,CAAWqC,KANpB;AAOE,MAAA,YAAY,EAAE,KAAK9C,YAPrB;AAQE,MAAA,YAAY,EAAE,KAAKP,YARrB;AASE,MAAA,UAAU,EAAE,KAAK2C,UATnB;AAUE,MAAA,cAAc,EAAE,KAAKP,cAVvB;AAWE,MAAA,YAAY,EAAE,KAAK1B,YAXrB;AAYE,MAAA,YAAY,EAAE,KAAKmC,YAZrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAkBD;;AAjLyB;;AAoL5B,eAAejD,OAAO,CAACa,KAAK,IAAIA,KAAV,CAAP,CAAwBX,GAAxB,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { setTasks, addTask, updateCompleted, removeTask } from '../actions/Actions';\nimport Tasks from '../components/Tasks';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport './App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      toggleOn: false,\n      task: '',\n      description: '',\n      due: '',\n      errorMessage: ''\n    };\n  }\n\n  componentDidMount() {\n    const { dispatch } = this.props;\n    \n    axios\n      .get(`/tasks`)\n      .then(res => {\n        const { data, message } = res.data;\n        dispatch(setTasks(data));\n        console.log(message)\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  handleChange = e => {\n    this.setState({\n      [e.target.name]: e.target.value,\n      errorMessage: ''\n    });\n  }\n\n  handleToggle = () => {\n    let { toggleOn } = this.state;\n\n    if (!toggleOn) {\n      this.setState({\n        toggleOn: true,\n      });\n    }\n  }\n\n  // Submits a new task to datastore and server\n  handleSubmit = e => {\n    e.preventDefault();\n\n    const { task, description, due } = this.state;\n    const { dispatch } = this.props;\n\n    if (!task) {\n      this.setState({\n        errorMessage: 'Please enter a task'\n      });\n      return;\n    } else if (!description) {\n      this.setState({\n        errorMessage: 'Please enter a description'\n      });\n      return;\n    } else if (!due) {\n      this.setState({\n        errorMessage: 'Please enter a due date'\n      });\n      return;\n    }\n\n    const date = due.split('-');\n\n    const newTask = {\n      taskname: task,\n      taskDescription: description,\n      dueDate: { month: date[1], day: date[2], year: date[0] },\n      completed: false\n    };\n\n    axios\n      .post('/tasks', newTask)\n      .then(res => {\n        const { task, message } = res.data;\n        console.log(message);\n        dispatch(addTask(task));\n        this.setState({\n          toggleOn: false,\n          task: '',\n          description: '',\n          due: ''\n        });\n      })\n      .catch(err => {\n        console.log('Error:', err);\n      });\n  }\n\n  // Sends a patch request for a Task by id\n  handleComplete = e => {\n    const taskId = e.target.parentElement.value;\n    const { dispatch } = this.props;\n\n    const updatedTask = {\n      id: taskId,\n      completed: e.target.checked\n    };\n\n    axios\n      .patch(`/tasks/${taskId}`, updatedTask)\n      .then(res => {\n        console.log(res.data.message);\n        dispatch(updateCompleted(updatedTask.id, updatedTask.completed));\n        this.setState({});\n      })\n      .catch(err => {\n        console.log(err)\n      });\n  }\n\n  // Sends a Delete request\n  deleteById = e => {\n    e.preventDefault();\n    const taskId = e.target.parentElement.value;\n    const { dispatch } = this.props;\n\n    const task = {\n      id: taskId\n    }\n\n    axios\n      .delete(`/tasks/${taskId}`, task)\n      .then(res => {\n        console.log(res.data.message);\n        dispatch(removeTask(task.id));\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  // Sends a get request to filter Tasks\n  handleFilter = e => {\n    const filter = JSON.stringify({where: {filter: e.target.value}});\n    const { dispatch } = this.props;\n\n    console.log('Filter:', filter);\n    axios\n      .get(`/tasks?filter${filter}`)\n      .then(res => {\n        const { data, message } = res.data;\n        console.log(message);\n        dispatch(setTasks(data));\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  render() {\n    const { task, toggleOn, description, due, errorMessage } = this.state;\n    \n    return (\n      <div className='App'>\n        <Tasks \n          task={task} \n          description={description} \n          due={due}\n          toggleOn={toggleOn} \n          message={errorMessage}\n          tasks={this.props.tasks} \n          handleToggle={this.handleToggle}\n          handleChange={this.handleChange}\n          deleteById={this.deleteById}\n          handleComplete={this.handleComplete}\n          handleSubmit={this.handleSubmit}\n          handleFilter={this.handleFilter}\n        />\n      </div>\n    );\n  }\n}\n\nexport default connect(state => state)(App);\n"]},"metadata":{},"sourceType":"module"}